<!DOCTYPE html>
<html>
<head>
	<title>Hello Mari</title>
	<script src="/socket.io/socket.io.js"></script>
	<script src="http://code.jquery.com/jquery-1.12.1.min.js"></script>
	<script type="text/javascript" src="d3lib.js"></script>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<button onclick = "update()">Update</button>
	<h2>Hi</h2>
	<script src="data.js"></script>
<!-- 	<script src="p5.js"></script> -->

	


    <script type="text/javascript">
    //dataset.push(num) //to add it to array of current data
    //dataset.shift() //to remove an item
    //update();

	// var dataset = [ 25, 7, 5, 26, 11, 8, 25, 14, 23, 19,
 //                14, 11, 22, 29, 11, 13, 12, 17, 18, 10,
 //                24, 18, 25, 9, 3 ];

 // var dataset = [];

	// function update() {
	// 	var new = svg2.selectAll("rect")
	// 	    .data(dataset2);
	// 	new.enter()
	// 	    .append("rect")
	// 	    .text(function(d) { return d; });
	// 	new.exit()
	// 		.remove();
	// }
	// update();


//SVG bar chart for slider sensor
	var w2 = 500;
	var h2 = 300;
	var barPadding = 1;
	var dataset2 = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
		var svg2 = d3.select("body")
			.append("svg")
			.attr("width", w2)
			.attr("height", h2);

function update1(newVal){
	dataset2.shift();
	dataset2.push(newVal);
	
	// console.log(dataset2);
	// console.log(typeof newVal)
		svg2.selectAll("rect").remove();
		svg2.selectAll("text").remove();

// svg2 = d3.select("body")
// 		 .append("svg")
// 		 .attr("width", w2)
// 		 .attr("height", h2);

var rectangles = svg2.selectAll("rect")
					 .data(dataset2);
		// rectangles.exit().remove();
		rectangles
			.enter()
			.append("rect")
			.attr("x", function(d, i) {
   				 return i * (w2 / dataset2.length); //tie x position of bars to number of elements in data set
			})
			.attr("y", function(d) {
   				if (d){
   					return h2 - d;  //Height minus data value
   				}
   				
			}) //vertical position of top of each bar
			.attr("width", w2 / dataset2.length - barPadding)
			.attr("height", function(d) {
    			return d;  
			})
			.attr("fill", function(d) {
    			return "rgb(0, 0, " + (d * 2) + ")";
			});

		svg2.selectAll("text")
		   .data(dataset2)
		   .enter()
		   .append("text")
		   .text(function(d) {
        		return d;
   			})
		    .attr("x", function(d, i) {
        		return i * (w2 / dataset2.length) + (w2 / dataset2.length - barPadding) / 2;
   			})

    		.attr("y", function(d) {
    			if (d){
    				return h2 - d +15; 
    			}
        		 
   		 	})
   			.attr("font-family", "sans-serif")
   			.attr("font-size", "11px")
   			.attr("fill", "white")
   			.attr("text-anchor", "middle");
}
update1();

//temp sensor SVG chart
	var w = 500;
	var h = 500;
	var barPadding = 1;
	var dataset = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
		var svg = d3.select("body")
			.append("svg")
			.attr("width", w)
			.attr("height", h);

function update2(newVal){
	dataset.shift();
	dataset.push(newVal);
	
	// console.log(dataset2);
	// console.log(typeof newVal)
		svg.selectAll("rect").remove();
		svg.selectAll("text").remove();


var rectangles = svg.selectAll("rect")
					 .data(dataset);
		// rectangles.exit().remove();
		rectangles
			.enter()
			.append("rect")
			.attr("x", function(d, i) {
   				 return i * (w / dataset.length); //tie x position of bars to number of elements in data set
			})
			.attr("y", function(d) {
   				if (d){
   					return h - d;  //Height minus data value
   				}
   				
			}) //vertical position of top of each bar
			.attr("width", w / dataset.length - barPadding)
			.attr("height", function(d) {
    			return d;  
			})
			.attr("fill", function(d) {
    			return "rgb(0, " + (d*2) + ", 0)";
			});

		svg.selectAll("text")
		   .data(dataset)
		   .enter()
		   .append("text")
		   .text(function(d) {
        		return d;
   			})
		    .attr("x", function(d, i) {
        		return i * (w / dataset.length) + (w / dataset.length - barPadding) / 2;
   			})

    		.attr("y", function(d) {
    			if (d){
    				return h - d +15; 
    			}
        		 
   		 	})
   			.attr("font-family", "sans-serif")
   			.attr("font-size", "11px")
   			.attr("fill", "white")
   			.attr("text-anchor", "middle");
}
update2();

//SVG bar chart for light sensor
	var w1 = 500;
	var h1 = 300;
	var barPadding = 1;
	var dataset1 = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
		var svg1 = d3.select("body")
			.append("svg")
			.attr("width", w1)
			.attr("height", h1);

function update3(newVal){
	dataset1.shift();
	dataset1.push(newVal);
	
	// console.log(dataset2);
	// console.log(typeof newVal)
		svg1.selectAll("rect").remove();
		svg1.selectAll("text").remove();

var rectangles = svg1.selectAll("rect")
					 .data(dataset1);
		// rectangles.exit().remove();
		rectangles
			.enter()
			.append("rect")
			.attr("x", function(d, i) {
   				 return i * (w1 / dataset1.length); //tie x position of bars to number of elements in data set
			})
			.attr("y", function(d) {
   				if (d){
   					return h1 - (d/10);  //Height minus data value
   				}
   				
			}) //vertical position of top of each bar
			.attr("width", w1 / dataset1.length - barPadding)
			.attr("height", function(d) {
    			return d;  
			})
			.attr("fill", function(d) {
    			return "rgb(" + (d/3.5) + ", 0, 0)";
			});

		svg1.selectAll("text")
		   .data(dataset1)
		   .enter()
		   .append("text")
		   .text(function(d) {
        		return d;
   			})
		    .attr("x", function(d, i) {
        		return i * (w1 / dataset1.length) + (w1 / dataset1.length - barPadding) / 2;
   			})

    		.attr("y", function(d) {
    			if (d){
    				return h1 - (d/10) +15; 
    			}
        		 
   		 	})
   			.attr("font-family", "sans-serif")
   			.attr("font-size", "11px")
   			.attr("fill", "white")
   			.attr("text-anchor", "middle");
}
update3();

//SVG bar chart for joystick xvalue
	var w4 = 500;
	var h4 = 300;
	var barPadding = 1;
	var dataset4 = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
		var svg4 = d3.select("body")
			.append("svg")
			.attr("width", w4)
			.attr("height", h4);

function update4(newVal){
	dataset4.shift();
	dataset4.push(newVal);
	
	// console.log(dataset2);
	// console.log(typeof newVal)
		svg4.selectAll("rect").remove();
		svg4.selectAll("text").remove();

// svg2 = d3.select("body")
// 		 .append("svg")
// 		 .attr("width", w2)
// 		 .attr("height", h2);

var rectangles = svg4.selectAll("rect")
					 .data(dataset4);
		// rectangles.exit().remove();
		rectangles
			.enter()
			.append("rect")
			.attr("x", function(d, i) {
   				 return i * (w4 / dataset4.length); //tie x position of bars to number of elements in data set
			})
			.attr("y", function(d) {
   				if (d){
   					return h4 - d;  //Height minus data value
   				}
   				
			}) //vertical position of top of each bar
			.attr("width", w4 / dataset4.length - barPadding)
			.attr("height", function(d) {
    			return d;  
			})
			.attr("fill", function(d) {
    			return "rgb(0, 0, " + (d * 2) + ")";
			});

		svg4.selectAll("text")
		   .data(dataset4)
		   .enter()
		   .append("text")
		   .text(function(d) {
        		return d;
   			})
		    .attr("x", function(d, i) {
        		return i * (w4 / dataset4.length) + (w4 / dataset4.length - barPadding) / 2;
   			})

    		.attr("y", function(d) {
    			if (d){
    				return h4 - d +15; 
    			}
        		 
   		 	})
   			.attr("font-family", "sans-serif")
   			.attr("font-size", "11px")
   			.attr("fill", "white")
   			.attr("text-anchor", "middle");
}
update4();

    </script>
</body>
</html>